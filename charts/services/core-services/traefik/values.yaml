image: traefik:2.11.2
namespace: core-services
ports:
- name: web
  containerPort: 80
  externalPort: 80
  protocol: TCP
- name: websecure
  containerPort: 443
  externalPort: 443
  protocol: TCP
- name: dashboard
  containerPort: 8080
  externalPort: 8082
  protocol: TCP
volumes:
- name: letsencrypt
  hostPath: <path:kv/data/hostPath#appdata>/core-services/letsencrypt
  podPath: /letsencrypt

traefik:
  namespaceOverride: core-services
  deployment: 
    revisionHistoryLimit: 1
  providers:
    kubernetesCRD:
      allowCrossNamespace: true
    kubernetesIngress:
      publishedService:
        enabled: true
  ports:
    traefik:
      exposedPort: 8082
      expose:
        default: true
    web:
      asDefault: true
  certResolvers: 
    letsencrypt:
      email: florin.vasilica95@gmail.com
      tlsChallenge: true
      httpChallenge:
        entryPoint: "web"
      storage: /letsencrypt/acme.json