namespace: &namespace utility-services
image:
  repository: onlyoffice/documentserver
  tag: 8.1.3
service:
  type: ClusterIP
domain: <path:kv/data/domains#localDomain>
ports:
- name: http
  containerPort: 80
  externalPort: 80
  protocol: TCP
volumes:
- name: data
  subPath: utility-services/onlyoffice/data
  podPath: /var/www/onlyoffice/Data
  type: DirectoryOrCreate
- name: log
  subPath: utility-services/onlyoffice/log
  podPath: /var/log/onlyoffice
  type: Directory
- name: cache
  subPath: utility-services/onlyoffice/cache
  podPath: /var/lib/onlyoffice/documentserver/App_Data/cache/files
  type: Directory
- name: files
  subPath: utility-services/onlyoffice/files
  podPath: /var/www/onlyoffice/documentserver-example/public/files
  type: Directory
- name: fonts
  subPath: utility-services/onlyoffice/fonts
  podPath: /usr/share/fonts
  type: Directory

connections:
  dbType: postgres
  dbHost: postgres-loadbalancer.core-services.svc
  dbPort: 5432
  dbName: onlyoffice

  redisHost: onlyoffice-redis
  redisPort: 6379

  amqpType: rabbitmq
  amqpHost: amqp://user:<path:kv/data/utility-services/onlyoffice#rabbitmqPassword>@onlyoffice-rabbitmq
  amqpPort: 5672
  amqpUser: user

redis:
  namespaceOverride: *namespace
  auth:
    enabled: false

rabbitmq:
  namespaceOverride: *namespace
  auth:
    user: user
    existingPasswordSecret: onlyoffice
    existingSecretPasswordKey: rabbitmqPassword
    persistence:
      enabled: true
      storageClass: manual
      selector: 
        type: local
      subPath: utility-services/onlyoffice/rabbitmq
  service:
    ports:
      amqp: 5672